# 数码推荐网站文档

## 摘要:

  本项目作为网络与Web应用基础的课程项目, 其基本功能已经完成: 优秀的界面属性, 各
个界面之间的交互场景, 以及优秀稳定的后端架构, 和完善的接口文档. 当然, 我们也有
考虑到的安全机制以保证用户的信息, 本次的文档仅作为项目描述, 不包含接口信息.
有关接口信息请查看项目Github主页[https://github.com/TinyBang/digital_all]

## 需求分析

  在电子设备日益增多的现在, 许多时候, 一个发布会之后, 大多数的爱好者就会考虑是否
入手该设备, 当然我们面向的用户不是这些敏感的爱好者. 与之不同, 我们面向的更多的是
那些相对热度较低的爱好者, 他们会在发布会结束后许久才会考虑设备的购买, 毕竟, 等待
该产品的评测, 并且看看大家的评论也是一件极有个性的选择. 我们就有这样的组员, 当他
们在面对众多的评测视频与评测网站时, 总会感觉信息不够集中, 不够专业. 我们的目标
就是实现这样一个网站, 在发布会之后, 集中各个网站对某些新品做了专业评测, 这时, 我
们会针对这样的产品进行特点分析, 确定他的优势以及劣势, 并尽可能的给出购买者应有的
心里准备.

## 前期调研

  项目开始前夕, 调研主要针对了目前的电商数码产品的推荐网站, 发现了几点可以改进的
问题

  分类杂乱, 太大太全: 主要包括京东, 天猫, 什么值得买, 这些网站关注要点较多, 且
面向的人群大而杂. 主要原因是这些网站本来就是面向所有人.

  评测更新不及时, 左找右找: 例如Bilibili, 这样的网站会有个别up主进行原创制作, 但是
爱好者寻找起来费时费力, 主要是由于网站的主题并非为推荐.


## 技术选型


## 模块划分

* 整个项目的模块划分包括两个层面, 分别为纵向和横向划分

1.纵向划分

  纵向划分分为前端, 后端, 以及交互.
  前端主要包括
    - js、css引用
    - 页面初始数据

  后端主要包括
    - get,post参数获取
    - 代码逻辑交互
    - 数据库访问交互

  交互主要包括
    - 后端文档的阅读以及使用
    - 前端页面的了解
    - 操作DOM树以提供用户交互性


2横向划分

  以模块为单位进行划分, 不论是前端还是后端, 其模块划分都是比较分明的, 其中包括
  这样几个方面

  游客访问
  注册
  登录
  注册用户访问



## 主要流程

* 主要流程为后端流程, 包括用户注册, 登录, 以及数码信息查询

  用户可以在网站首页选择注册账户。

  注册账户的流程如下：用户在客户端输入账号密码，客户端会发送至后端，后端对账号密码进行判断。如果用户名或者密码之间至少有一个为空，那么返回错误码101，同时提示用户名密码不能为空。随后按照用户名查找已注册用户。如果查到已有用户，那么返回错误码102，提示用户名已存在。如果没有找到，说明该用户名可以被注册。

  注册后可以登录账户。

  登陆账户的方法如下：在用户名和密码都具备的情况下，后端查询数据库得到密码并校验密码。如果没有找到对应的用户名，返回错误码203并提示账号不存在。如果密码错误，返回错误码202，并且提示密码错误。如果成功匹配数据库数据，那么给用户分配一个cookie，cookie的值为字符串key，value为用户的id。并且将用户id和用户名添加到cache。cache用于验证登陆的有效性。只要调用startHandler就可以从cookie中的value获取到用户的id，通过这个id可以从cache中拿到已登陆用户的用户名。

  数码信息查询一共提供了两个接口：getdata，searchcommodity。

  从名称可以看出，前者用于用户选择了要浏览的品类获得商品信息。后者可以用户通过名称查询商品。两者的查询流程相同，这里选其一getdata来解释。

  通过参数sort来筛选数据库。用for循环将每一个得到的item加入到一个数组中。在这个地方需要说明的是返回内容的格式。

  返回内容content是一个数组。这个数组的内容是每一个商品。商品包括商品id，商品名，商品简介和商品的图片链接。图片链接也是一个数组。




## 关键技术

* 本次项目将由众多的技术组成, 包括了前端, 后端, 以及交互层面和项目协作的问题, 接
   下来, 文档将从这些方面开始进行技术介绍

1.前端:


2.后端:后端语言使用的是python+tornado，开发工具PyCharm。数据库使用Mysql，数据库链接工具SQLAlchemy.

3.交互:
 *  javascript 与后端交互
   * __HTML赋值,使用JS获取__  适合传递简单数据，也非常适合多个简单数据与 Element 绑定关系。
   * __JS赋值__  将数据填充到 <script> 的 JavaScript 变量声明中。需要最快速度传递数据给 JS 并十分确定此数据稳定时，使用此方式。数据格式复杂的建议使用script填充JSON 或AJAX获取JSON 方法。
   * __script填充JSON__  填充 JSON 数据到 <script> 标签中，前端通过 DOM 获取 JSON字符串并解析成对象。
   * __AJAX获取JSON__  适合加载非主要信息、设定触发条件（用户点击查看资料时），并提供友好的数据读取等待提示。
 *  JavaScript操纵DOM树
   * DOM 中的三个字母，D（Document）可以理解为整个 Web 加载的网页文档；O（Object）可以理解为类似 window 对象之类的东西，可以调用属性和方法，这里我们说的是 document对象；M（Model）可以理解为网页文档的树型结构。
   * 加载 HTML 页面时，Web 浏览器生成一个树型结构，用来表示页面内部结构。DOM 将这种树型结构理解为由节点组成.
   * 使用JavaScript操纵DOM树。包括查找节点、创建节点、复制节点、插入节点、删除节点和替换节点。
 *  基于json的 jQuery Ajax - post()方法
   * 前端通过jQuery Ajax传输json到后端，后端接收json，对json进行处理，后端返回一个json给前端
   * 基于后端所给的json所包含的信息操纵DOM树，对前端部分非主要信息进行修改和更新。
   * 由于是使用jQuery，则需要导入jQuery的类库：jquery-3.2.1.min.js，使得 JavaScript的开发更加方便、高效！

4.项目协作()


